# Assignment Specification

## Objectives:

1. **Command Line Arguments**  
   The executable should be called `box` and accept six command-line parameters:
   ```bash
   ./box <map_row> <map_col> <player_row> <player_col> <goal_row> <goal_col>
   ```
   - `<map_row>` and `<map_col>` define the playable map size (not including borders).
   - `<player_row>` and `<player_col>` define the starting location of the player.
   - `<goal_row>` and `<goal_col>` define the location of the goal.
   - **Assume** arguments are integer data types, but you must **check for valid values**:
     - Map size must be â‰¥ 5.
     - Coordinates must be within bounds and non-negative.
   - Reject too many or too few arguments with a warning message. **Do not use `exit()`**.
   - Use `malloc()` to allocate memory for the 2D map, as variable-length arrays are not allowed in C89.

2. **Map Interface**  
   On program start:
   - Clear the terminal screen.
   - Display the 2D map using the following characters:
     - `*` for the map border.
     - `P` for the player.
     - `G` for the goal.
     - `B` for the box (initially placed at a random valid location).
   - The box **must not overlap** with the player or the goal and **must not be next to or on the border**.

3. **User Input**  
   - Accept single-character input without needing to press Enter (`w`, `a`, `s`, `d`).
   - Other characters should be ignored with a warning like `"invalid key"`.
   - The player moves only if space is available.
   - If the player pushes the box, both move in that direction unless the box is against a border.

4. **Randomized Box Location**  
   - On program start, place the box in a random, valid location.
   - If the box spawns on the player, goal, or next to a wall, re-randomize until valid.
   - A helper function is provided in the supplied video for generating random numbers.

5. **Win Condition**  
   - The player **wins** when the box is pushed onto the goal location.
   - Once the box reaches the goal:
     - Update the background color of the goal from red to green.
   - Do **not** use `exit()` or `break`. Free any dynamically allocated memory, and let the program end naturally.

6. **Background Color**  
   - Use background color functions as shown in the supplementary video:
     - **Red** if the box is not on the goal.
     - **Green** when the box reaches the goal.
   - This is a **visual enhancement**, not mandatory for logic.

7. **Conditional Compilation (PULL Feature)**  
   - If compiled with `PULL=1`:
     - The player can pull the box if moving in the opposite direction.
   - Use conditional compilation macros (`#ifdef PULL`) to enable this feature only when requested:
     ```bash
     make PULL=1
     ```

## Additional Requirements:
### Makefile:
- Write your **own Makefile** (not auto-generated by VSCode).
   - It should include:
     - Make variables (e.g., `CC`, `CFLAGS`)
     - Conditional compilation flags (e.g., `-DPULL`)
     - Targets (e.g., `all`, `clean`)
     - Proper dependencies between `.c` and `.h` files
   - A clean rule to delete object files and the compiled binary.

## Assumptions:

- All command-line arguments are integers.
- Map size will be within reasonable terminal display size (e.g., not 300x500).
- Only lowercase movement keys (`w`, `a`, `s`, `d`) will be tested.
- Terminal features (like clearing screen and no-Echo mode) can be used as shown in class.

---

## Marking Criteria (Total: 100 Marks):

| Criteria | Marks |
|---------|-------|
| Properly structured Makefile | 5 |
| Compiles and runs correctly | 5 |
| Header guards + in-code commenting | 2 |
| Good project structure with multiple files | 3 |
| Good coding practices (no globals, no `exit()`, etc.) | 5 |
| No memory leaks | 10 |
| Command line argumant accepting and verifications with proper error response | 5 |
| Proper memory acllocation for the 2D array | 5 |
| Clearing the screen and re-pritning | 5 |
| Randomly initialize box location correctly | 5 |
| Player movement on keyboard inputs | 5 |
| Able to push the box with player | 10 |
| Succesful disable of the Echo and Canocial temporarily | 5 |
| Implement of PULL feature with conditional compilation | 15 |
| Correct win or lose conditions | 10 |
| Correct background color for goal | 10 |

---

For more information about this assignment, please refer to the [Assignment Details PDF](/UCP_2023_S1_Assignment_1.pdf).